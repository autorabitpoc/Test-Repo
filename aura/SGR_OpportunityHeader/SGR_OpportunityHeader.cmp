<!-- **************************************************************************************************************************
* Lightning Component Name : SGR_OpportunityHeader
* Version                  : 1.0
* Function                 : This is the header for the SGR Opportunity (created to display more fields than compact layout allows)
* Modification Log         :
* Developer                           Date               Description
* _____________________________________________________________________________________________________________________________
* Landry Harris                      10/15/2018			SFDC-12953 Created component
****************************************************************************************************************************** -->
<aura:component implements="flexipage:availableForRecordHome,force:hasRecordId" access="global"
                controller="Sgr_displayCensus">
    <aura:attribute name="recordId" type="Id"/>
    <aura:attribute name="opportunity" type="Object"/>
    <aura:attribute name="Opp" type="Object"/>
    <aura:attribute name="recordError" type="String"/>
    <aura:attribute name="Renewaldate" type="Date"/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:handler event="c:refreshOptyRatingStatus" action="{!c.refreshOptyRating}"/>
    <aura:handler event="c:RatingStatusRefresh" action="{!c.refreshRatingStatus}"/>

    <!-- START PK - The following line will Autorefresh header on detail change>-->
    <aura:handler event="force:refreshView" action="{!c.refreshRatingStatus}"/>
    <aura:handler event="force:showToast" action="{!c.refreshRatingStatus}"/>
    <!-- Done by PK -->


    <!-- <aura:handler event="force:refreshView" action="{!c.refresh}"/>-->


    <!-- Lightning Data Service to retrieve and display Opportunity fields -->
    <force:recordData aura:id="recordLoader"
                      recordId="{!v.recordId}"
                      targetFields="{!v.opportunity}"
                      targetError="{!v.recordError}"
                      fields="Id,External_ID__c,Renewal_Date__c,Funding_Type__c,HCSC_Division__c,
              Account_Market_Segment__c,sgrAccountHoldReason__c,Rating_Status__c,
              SGR_Workflow_Activity__c,RecordType.Name,Current_Tier_Billing__c,SGR_Opportunity_Auto_Number__c,Has_Notes__c"/>

    <!-- SLDS column layout/styling to ensure CSS matches Salesforce default for header fields -->
    <div class="slds-grid slds-scrollable_x slds-p-vertical_medium slds-p-horizontal_small">
        <div class="slds-col slds-page-header__detail-block">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Opportunity Number">Opportunity
                Number</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.SGR_Opportunity_Auto_Number__c}</p>
            <!--<p class="slds-text-body_regular slds-truncate">{!v.opportunity.External_Id__c}</p>-->
        </div>
        <div class="slds-col slds-page-header__detail-block">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Renewal Effective Date">Renewal
                Effective Date </p>
            <ui:outputDate value="{!v.Renewaldate}" format='MM/dd/yyyy'/>
            <!--<force:outputField value="{!v.Opp.Renewal_Date__c}"/>-->
            <!-- <lightning:outputField fieldName="Renewal_Date__c" />-->
            <!-- <lightning:formattedDateTime value="{!v.Renewaldate}"    year="numeric" month="numeric" day="numeric" timeZone="{! $Locale.timezone }"/>-->

        </div>
        <div class="slds-col slds-page-header__detail-block">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Funding Type">Funding Type</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.Funding_Type__c}</p>
        </div>

        <div class="slds-col slds-page-header__detail-block">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Division">Division</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.HCSC_Division__c}</p>
        </div>

        <div class="slds-col slds-page-header__detail-block">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Market Segment">Market Segment</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.Account_Market_Segment__c}</p>
        </div>
        <div class="slds-col slds-page-header__detail-block">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Account Hold Status">Account Hold
                Status</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.sgrAccountHoldReason__c}</p>
        </div>
        <div class="slds-col slds-page-header__detail-block">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Workflow Activity">Workflow
                Activity</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.SGR_Workflow_Activity__c}</p>
        </div>
        <div class="slds-col slds-page-header__detail-block">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Rating Status">Rating Status</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.Rating_Status__c}</p>
        </div>
        <div class="slds-col slds-page-header__detail-block">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Opportunity Type">Opportunity
                Type</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.RecordType.Name}</p>
        </div>
        <div class="slds-col slds-page-header__detail-block ">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Current Tier/Billing">Current
                Tier/Billing</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.Current_Tier_Billing__c}</p>
        </div>
        <div class="slds-col slds-page-header__detail-block ">
            <p class="slds-text-title slds-truncate slds-m-bottom_xx-small" title="Notes?">Notes?</p>
            <p class="slds-text-body_regular slds-truncate">{!v.Opp.Has_Notes__c}</p>
        </div>
        <div class="slds-col"></div>
    </div>

</aura:component>